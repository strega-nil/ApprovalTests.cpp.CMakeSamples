<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /conan_cmake_find_package/mdsource/README.source.md
To change this file edit the source file and then execute ./run_markdown_templates.sh.
-->

# conan_cmake_find_package

 <!-- include: conan_cmake_find_package. path: /conan_cmake_find_package/mdsource/conan_cmake_find_package.include.md -->
| Topic        | Detail                                                       |
| ------------ | ------------------------------------------------------------ |
| Directory    | [conan_cmake_find_package](/conan_cmake_find_package/)                        |
| Purpose      | Demo how to build your tests using Conan's `cmake_find_package` and optionally `cmake_paths` generators to download single headers for specific releases of ApprovalTests.cpp and Catch2.<br />The released headers of those dependencies will be downloaded inside your CMake build space, and will not be shown inside your IDE. |
| Dependencies | ApprovalTests.cpp - downloaded automatically by Conan<br/>Catch2 - downloaded automatically by Conan |
| Mechanism    | Uses Conan's [`cmake_find_package`](https://docs.conan.io/en/latest/integrations/build_system/cmake/cmake_find_package_generator.html) and (optionally) [`cmake_paths`](https://docs.conan.io/en/latest/integrations/build_system/cmake/cmake_paths_generator.html) generators.                              |
| More Detail  |                                                              |
 <!-- end include: conan_cmake_find_package. path: /conan_cmake_find_package/mdsource/conan_cmake_find_package.include.md -->

The conanfile.txt file is:

 <!-- include: inc_conan_cmake_find_package_conanfile. path: /conan_cmake_find_package/mdsource/inc_conan_cmake_find_package_conanfile.include.md -->

```cmake
[requires]
catch2/2.11.0
approvaltests.cpp/8.8.0

[generators]
cmake_find_package
cmake_paths
```
<sup><a href='https://github.com/claremacrae/ApprovalTests.cpp.CMakeSamples/blob/main/./conan_cmake_find_package/conanfile.txt' title='File snippet was copied from'>snippet source</a></sup>
 <!-- end include: inc_conan_cmake_find_package_conanfile. path: /conan_cmake_find_package/mdsource/inc_conan_cmake_find_package_conanfile.include.md -->

The top-level CMakeLists.txt file is:

 <!-- include: inc_conan_cmake_find_package_cmakelists. path: /conan_cmake_find_package/mdsource/inc_conan_cmake_find_package_cmakelists.include.md -->

```cmake
cmake_minimum_required(VERSION 3.14 FATAL_ERROR)

project(conan_cmake_find_package)

# EITHER Using the "cmake_find_package" generator
#set(CMAKE_MODULE_PATH ${CMAKE_BINARY_DIR} ${CMAKE_MODULE_PATH})
#set(CMAKE_PREFIX_PATH ${CMAKE_BINARY_DIR} ${CMAKE_PREFIX_PATH})

# OR Using the "cmake_find_package" and "cmake_paths" generators
include(${CMAKE_BINARY_DIR}/conan_paths.cmake)

find_package(Catch2 REQUIRED)
find_package(ApprovalTests REQUIRED)

enable_testing()

add_subdirectory(tests)
```
<sup><a href='https://github.com/claremacrae/ApprovalTests.cpp.CMakeSamples/blob/main/./conan_cmake_find_package/CMakeLists.txt' title='File snippet was copied from'>snippet source</a></sup>
 <!-- end include: inc_conan_cmake_find_package_cmakelists. path: /conan_cmake_find_package/mdsource/inc_conan_cmake_find_package_cmakelists.include.md -->

And the CMakeLists.txt that builds the tests is:

 <!-- include: inc_conan_cmake_find_package_tests_cmakelists. path: /conan_cmake_find_package/mdsource/inc_conan_cmake_find_package_tests_cmakelists.include.md -->

```cmake
add_executable(tests
        main.cpp
        tests.cpp
)
target_link_libraries(
        tests
        ApprovalTests::ApprovalTests
        Catch2::Catch2)

target_compile_features(tests PUBLIC cxx_std_11)
set_target_properties(tests PROPERTIES CXX_EXTENSIONS OFF)

add_test(
        NAME tests
        COMMAND tests)
```
<sup><a href='https://github.com/claremacrae/ApprovalTests.cpp.CMakeSamples/blob/main/./conan_cmake_find_package/tests/CMakeLists.txt' title='File snippet was copied from'>snippet source</a></sup>
 <!-- end include: inc_conan_cmake_find_package_tests_cmakelists. path: /conan_cmake_find_package/mdsource/inc_conan_cmake_find_package_tests_cmakelists.include.md -->

The build script is:

 <!-- include: inc_conan_cmake_find_package_build. path: /conan_cmake_find_package/mdsource/inc_conan_cmake_find_package_build.include.md -->

```cmake
#!/bin/sh

# Force execution to halt if there are any errors in this script:
set -e
set -o pipefail

sourcedir=`pwd`
mkdir -p cmake-build-spaces/cmake-build-command-line
cd       cmake-build-spaces/cmake-build-command-line
conan install $sourcedir
cmake -Wdev $sourcedir
cmake --build .
ctest .
```
<sup><a href='https://github.com/claremacrae/ApprovalTests.cpp.CMakeSamples/blob/main/./conan_cmake_find_package/build.sh' title='File snippet was copied from'>snippet source</a></sup>
 <!-- end include: inc_conan_cmake_find_package_build. path: /conan_cmake_find_package/mdsource/inc_conan_cmake_find_package_build.include.md -->
